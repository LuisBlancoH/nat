# NAT Small Configuration
# For debugging and development on Apple Silicon / CPU

# Model
base_model_name: "Qwen/Qwen3-4B"
rank: 16
d_hidden: 128

# Adaptation
adapt_every_n: 64
lr_clamp: 0.05
fast_weight_max_norm: 8.0

# Consolidation
beta: 0.999
session_reset_alpha: 0.5

# Training - Phase 1 (episodic multi-domain meta-learning)
lr_phase1: 2e-4
num_episodes_p1: 1000
batch_size: 1
seq_len: 512
truncated_bptt: 8
grad_clip: 1.0
weight_decay: 0.01
improvement_weight: 0.1
num_problems_per_episode: 4
adapt_problems_p1: 2

# Training - Phase 2 (consolidation across domains)
lr_phase2: 1e-4
num_runs_p2: 50
sessions_per_domain_p2: 5
forgetting_test_sessions_p2: 2
p2_truncate_sessions: 2

# Device
device: "auto"
base_dtype: "bfloat16"

# Logging
wandb_project: "nat-debug"
wandb_entity: null
log_every: 10

# Saving
save_dir: "checkpoints"
save_every: 100
